<main class="hy-tmpl-instructions">
  <div class="hy-tmpl-instructions-row">
    <h1 data-i18n="instructions.titles.page"></h1>
    <p data-i18n="instructions.intro"></p>
  </div>
  <figure class="hy-tmpl-instructions-row">
    <button class="hy-button hy-video-button" onclick="sonyBraviaAndroidTvInstructions.onClickVideo()">
      <video class="hy-video" width="480" height="272" muted autoplay loop>
        <source src="assets/video/instructions.webm" type="video/webm">
      </video>
    </button>
    <figcaption data-i18n="instructions.video_caption"></figcaption>
  </figure>
  <div class="hy-tmpl-instructions-row">
    <p data-i18n="instructions.step_by_step.intro"></p>
    <ul data-i18n="instructions.step_by_step.steps"></ul>
  </div>
  <div class="hy-tmpl-instructions-row">
    <p data-i18n="instructions.step_by_step.outro"></p>
  </div>
  <div class="hy-tmpl-instructions-row">
    <button class="hy-button hy-button-primary hy-button-fill" type="button"
      onclick="sonyBraviaAndroidTvInstructions.onClickContinue()" data-i18n="instructions.buttons.back"></button>
  </div>
</main>

<script type="text/javascript">
  class SonyBraviaAndroidTvInstructions {
    constructor() {
      Homey.setTitle(Homey.__("instructions.titles.header"));
    }

    onClickContinue(e) {
      Homey.getViewStoreValue('instructions', 'previous_view', (err, viewId) => {
        if (err) {
          Homey.alert(Homey.__("errors.previous_view"));
        }

        Homey.showView(viewId);
      });
    }

    onClickVideo(e) {
      Homey.popup("https://www.youtube.com/watch?v=3Z20nYXZQLA");
    }
  }

  const sonyBraviaAndroidTvInstructions = new SonyBraviaAndroidTvInstructions();
</script>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  /* Workaround for views without buttons */
  #hy-views>.hy-view {
    overflow: initial !important;
  }

  .hy-tmpl-instructions {
    min-height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .hy-tmpl-instructions ul li {
    font-size: 13px;
  }

  .hy-tmpl-instructions-row {
    margin-bottom: 1em;
  }

  .hy-button.hy-video-button {
    width: 100%;
    background: #e7e7e7;
    border: none;
    padding: 0;
    border-radius: 3px;
    overflow: hidden;
  }

  .hy-video {
    width: 100%;
    height: auto;
    opacity: 0;
    appearance: none;
    animation: fadeIn .3s ease-out .5s forwards;
  }

</style>
